<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- Title and Meta Description Updated -->
    <title>Free PUBG UC — Safe Ways to Get Free UC (No Hacks!)</title>
    <meta name="description" content="Learn safe ways to get Free PUBG UC. Beware of PUBG UC hack scams — use events, giveaways, reward apps, and legit tips to earn Free UC.">
    
    <!-- Favicon Link Added -->
    <link rel="icon" type="image/png" href="favicon.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Teko:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
    
    <style>
        :root {
            --primary-color: #F2A900; /* PUBG Yellow */
            --background-dark: #1a1a1a;
            --card-dark: #252525;
            --input-dark: #333333;
            --border-color: #444;
            --text-color: #f0f0f0;
            --text-light: #999;
            --card-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            --success-color: #28a745;
            --pending-color: #ffc107;
            --danger-color: #dc3545;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Teko', sans-serif; 
            background-color: var(--background-dark);
            background-image: url('https://www.transparenttextures.com/patterns/dark-denim-3.png');
            color: var(--text-color); 
            padding: 1.5rem 1rem; 
        }
        .app-container { 
            width: 100%; 
            max-width: 420px; 
            margin: 0 auto;
            position: relative;
        }
        .main-title { font-size: 2.5rem; font-weight: 700; text-align: center; margin-bottom: 0.25rem; color: var(--primary-color); text-transform: uppercase; letter-spacing: 1px; }
        .sub-title { text-align: center; color: var(--text-light); font-weight: 500; margin-bottom: 2rem; font-size: 1.2rem; }
        .card { background: var(--card-dark); border-radius: 12px; box-shadow: var(--card-shadow); margin-bottom: 1.5rem; border: 1px solid var(--border-color); }
        .card-header { padding: 1rem 1.25rem; font-size: 1.4rem; font-weight: 500; display: flex; align-items: center; gap: 0.75rem; border-bottom: 1px solid var(--border-color); letter-spacing: 0.5px; }
        .card-header .icon { width: 32px; height: 32px; background-color: var(--primary-color); color: var(--background-dark); border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 1.1rem; }
        .card-body { padding: 1.25rem; }
        .form-group { margin-bottom: 1rem; }
        .form-label { display: block; margin-bottom: 0.5rem; font-weight: 500; font-size: 1.1rem; color: #ccc; }
        .form-control, .form-select { width: 100%; padding: 0.8rem 1rem; border: 1px solid var(--border-color); border-radius: 8px; font-size: 1.2rem; font-family: 'Teko', sans-serif; background-color: var(--input-dark); color: var(--text-color); transition: border-color 0.3s; }
        .form-control:focus, .form-select:focus { border-color: var(--primary-color); outline: none; }
        .form-select { appearance: none; -webkit-appearance: none; background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23f0f0f0' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right 1rem center; background-size: 16px 12px; }
        .btn-topup { width: 100%; padding: 0.9rem; font-size: 1.5rem; font-weight: 700; letter-spacing: 1px; color: var(--background-dark); background: var(--primary-color); border: none; border-radius: 8px; cursor: pointer; transition: background 0.3s; text-transform: uppercase; display: flex; justify-content: center; align-items: center; gap: 0.75rem; }
        .btn-topup:disabled { background: #555; color: #888; cursor: not-allowed; }
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .uc-option { background-color: var(--input-dark); border: 1px solid var(--border-color); padding: 0.9rem 0.5rem; border-radius: 8px; cursor: pointer; text-align: center; font-weight: 500; font-size: 1.1rem; color: #ccc; transition: all 0.2s; }
        .uc-option.selected { border-color: var(--primary-color); background-color: var(--primary-color); color: var(--background-dark); font-weight: 700; }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); backdrop-filter: blur(5px); z-index: 1000; display: none; justify-content: center; align-items: center; opacity: 0; transition: opacity 0.3s; }
        .modal-overlay.show { display: flex; opacity: 1; }
        .modal-content { background: var(--card-dark); padding: 2rem; border-radius: 12px; width: 90%; max-width: 360px; text-align: center; border: 1px solid var(--border-color); }
        .modal-content h3 { font-size: 1.8rem; color: var(--primary-color); }
        .modal-content p { font-size: 1.1rem; }
        .btn-ad { width: 100%; padding: 0.8rem; border-radius: 10px; border: 1px solid var(--primary-color); color: var(--primary-color); background: transparent; font-weight: 600; font-family: 'Teko', sans-serif; font-size: 1.1rem; cursor: pointer; transition: all 0.2s; }
        .btn-ad:hover { background: var(--primary-color); color: var(--background-dark); }
        .btn-ad.watched { background: var(--success-color); border-color: var(--success-color); color: #fff; }
        .btn-cancel { width: 100%; padding: 0.8rem; border-radius: 10px; border: 1px solid var(--danger-color); color: var(--danger-color); background: transparent; font-weight: 600; cursor: pointer; margin-top: 1rem; font-family: 'Teko', sans-serif; font-size: 1.1rem; }
        .list-item { display: flex; justify-content: space-between; align-items: center; padding: 1rem 0; font-size: 1.1rem; border-bottom: 1px solid var(--border-color); }
        .list-item:last-child { border-bottom: none; }
        .status-badge { padding: 0.2rem 0.7rem; border-radius: 20px; font-size: 0.9rem; font-weight: 500; color: white; text-transform: uppercase; }
        .status-badge.success { background-color: var(--success-color); color: #fff; }
        .status-badge.pending { background-color: var(--pending-color); color: #333; }
        .btn-speed-up { background: #444; color: #ddd; border: none; padding: 0.4rem 0.8rem; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500; margin-top: 0.5rem; font-family: 'Teko', sans-serif; }
        .btn-speed-up:disabled { opacity: 0.5; cursor: not-allowed; }
        .spinner-border { width: 1.2rem; height: 1.2rem; border: 0.2em solid currentColor; border-right-color: transparent; border-radius: 50%; animation: spinner-border .75s linear infinite; } @keyframes spinner-border { to { transform: rotate(360deg); } }
        .d-none { display: none !important; }
        #success-toast { position: fixed; bottom: -100px; left: 50%; transform: translateX(-50%); background-color: #222; color: white; padding: 1rem 1.5rem; border-radius: 8px; z-index: 1002; font-weight: 500; transition: bottom 0.5s; border: 1px solid var(--primary-color); font-size: 1.1rem; }
        #success-toast.show { bottom: 20px; }
        #infoIcon { transition: transform 0.3s ease; }
        .info-card .card-body { display: none; padding-top: 0; line-height: 1.6; font-size: 1.1rem; color: var(--text-light); }
        #menu-trigger { position: absolute; top: 1rem; right: 0.5rem; font-size: 1.6rem; color: var(--text-light); cursor: pointer; z-index: 10; padding: 0.5rem; transition: color 0.3s; }
        #menu-trigger:hover { color: var(--primary-color); }
        #menu-modal { align-items: flex-start; justify-content: flex-end; }
        .menu-content { background: var(--card-dark); border-radius: 12px; width: 200px; margin-top: 4.5rem; margin-right: 1rem; border: 1px solid var(--border-color); overflow: hidden; box-shadow: var(--card-shadow); }
        .menu-content a { display: block; padding: 1.1rem 1.25rem; color: var(--text-color); text-decoration: none; font-size: 1.2rem; font-weight: 500; border-bottom: 1px solid var(--border-color); transition: background-color 0.2s; cursor: pointer; }
        .menu-content a:hover { background-color: var(--input-dark); }
        .menu-content a:last-child { border-bottom: none; }
        
        /* --- BLOG STYLES --- */
        #blog-section { display: none; }
        .blog-content { padding: 1.25rem; font-size: 1.2rem; line-height: 1.7; }
        .blog-content h1, .blog-content h2, .blog-content h3 { margin: 2rem 0 1rem; color: var(--primary-color); }
        .blog-content p, .blog-content li { color: var(--text-light); margin-bottom: 1rem; }
        .blog-content ul { list-style: none; padding-left: 0; }
        .blog-content ul li::before { content: '✅'; color: var(--primary-color); font-weight: bold; display: inline-block; width: 1.2em; margin-left: -1.2em; }
        .blog-content strong { color: #fff; }
        .faq-item { margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border-color); }
        .faq-item:first-child { margin-top: 0; padding-top: 0; border-top: none; }
    </style>
</head>
<body>
    <div class="app-container">
        
        <!-- Banner 320x50 Ad Placement - ADDED -->
        <div style="text-align: center; margin-bottom: 1rem;">
            <script type="text/javascript">
                atOptions = {
                    'key' : 'e3e8c243b5741cf0268f38cd219d4ab9',
                    'format' : 'iframe',
                    'height' : 50,
                    'width' : 320,
                    'params' : {}
                };
            </script>
            <script type="text/javascript" src="//www.highperformanceformat.com/e3e8c243b5741cf0268f38cd219d4ab9/invoke.js"></script>
        </div>

        <!-- Menu Trigger -->
        <div id="menu-trigger" title="Menu">
            <i class="fa-solid fa-ellipsis-vertical"></i>
        </div>

        <div id="main-content">
            <h2 class="main-title">PUBG UC Top-up</h2>
            <p class="sub-title">PUBG Mobile (Character ID)</p>
            
            <div class="card" id="infoCard">
                <div class="card-header" id="infoCardHeader" style="cursor: pointer;">
                    <div class="icon" style="background: transparent; color: var(--primary-color);"><i class="fa-solid fa-circle-question"></i></div>
                    <span>How to find your Character ID?</span>
                    <i class="fa-solid fa-chevron-down" id="infoIcon" style="margin-left: auto;"></i>
                </div>
                <div class="card-body" id="infoCardBody">
                    <p>1. Open PUBG Mobile on your device.<br>2. Go to your profile in the top-left corner.<br>3. Your Character ID is the number shown under your name.</p>
                </div>
            </div>

            <form id="topupForm" onsubmit="return false;">
                <div class="card">
                    <div class="card-header"><div class="icon"><i class="fa-solid fa-id-card"></i></div><span>Account Info</span></div>
                    <div class="card-body">
                        <label for="playerUid" class="form-label">Character ID</label>
                        <input type="number" class="form-control" id="playerUid" placeholder="Enter character id" required>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header"><div class="icon"><i class="fa-solid fa-parachute-box"></i></div><span>Select Recharge</span></div>
                    <div class="card-body"><div id="ucOptionsGrid" class="options-grid"><p style="grid-column: span 2; text-align: center; color: var(--text-light);">Please select a country first.</p></div></div>
                </div>
                
                <div class="form-group">
                    <label for="countrySelect" class="form-label">Country</label>
                    <select class="form-select" id="countrySelect" required><option value="" selected disabled>Select Country</option></select>
                </div>

                <button type="button" class="btn-topup" id="topupButton" disabled>
                    <span id="btnText">Top-up Now</span>
                    <div class="spinner-border d-none" id="loadingSpinner"></div>
                </button>
            </form>
            
            <!-- Native Banner Ad Placement - ADDED -->
            <div style="margin-top: 1.5rem; margin-bottom: 0rem;">
                <script async="async" data-cfasync="false" src="//pl27680057.revenuecpmgate.com/ba8084bb5644d872d51ae8d33bf1bd8b/invoke.js"></script>
                <div id="container-ba8084bb5644d872d51ae8d33bf1bd8b"></div>
            </div>

            <div class="card" id="historyCard" style="display: none; margin-top: 2rem;">
                <div class="card-header"><div class="icon"><i class="fa-solid fa-history"></i></div><span>Your History</span></div>
                <div class="card-body" style="padding: 0 1.25rem;"><div id="historyList" class="history-list"></div></div>
            </div>

            <div class="card" id="liveTopupCard" style="margin-top: 2rem;">
                <div class="card-header"><div class="icon"><i class="fa-solid fa-tower-broadcast"></i></div><span>Recent Top-ups</span></div>
                <div class="card-body" style="padding: 0 1.25rem;"><div id="liveTopupList" class="live-topup-list"></div></div>
            </div>
        </div>

        <!-- Blog Section (Initially Hidden) -->
        <div id="blog-section" class="card">
            <div class="blog-content">
                <h1>How to Get Free PUBG UC — Real Tips, Warnings, and Safe Apps</h1>
                <p>Everyone loves free in-game currency — and in PUBG Mobile that currency is <strong>UC</strong>. You may have searched for terms like <em>Free PUBG UC</em>, <em>PUBG UC hack</em>, <em>PUBG free UC app</em>, or <em>free uc pubg mobile</em>. Before you try anything, pause for a second — many “hacks” or shady apps promise free UC but they often steal accounts, show malware, or get you banned. Below I’ll explain safe, working ways to earn UC or get credits without risking your account.</p>
                
                <h3>1. Why “PUBG UC hack” is dangerous</h3>
                <p>Hacks and generators claiming <em>instant</em> or <em>unlimited</em> UC are usually scams. They might ask for your username and password, ask you to complete suspicious surveys, or make you install untrusted apps. These actions can lead to:</p>
                <ul>
                    <li>Account bans by PUBG/Tencent</li>
                    <li>Theft of your login or personal data</li>
                    <li>Malware on your phone</li>
                </ul>
                <p>So, avoid any site or app that promises UC in exchange for account credentials or weird downloads.</p>

                <h3>2. Legit ways to earn Free UC (or equivalent value)</h3>
                <p>While truly free UC is rare, here are safe methods people use to get UC or the money to buy UC:</p>
                <ul>
                    <li><strong>Official events & in-game giveaways:</strong> Keep an eye on PUBG Mobile’s events tab and official social channels. Sometimes events reward UC vouchers, skins, or coupons.</li>
                    <li><strong>Google Opinion Rewards & reward apps:</strong> Earn Play Store credit by answering surveys (Google Opinion Rewards) or using reputable reward apps. Use that credit to buy UC legally.</li>
                    <li><strong>Creator giveaways & tournaments:</strong> Follow trusted creators, esports organizers, and community events. Many creators host UC giveaways during streams.</li>
                    <li><strong>Redeem codes & promo events:</strong> Occasionally PUBG/Tencent release redeem codes for cosmetics or credit. Check official announcements.</li>
                    <li><strong>Loyalty programs & gift cards:</strong> Sometimes local stores or promotions offer gift cards or discounts you can use for in-game purchases.</li>
                </ul>

                <h3>3. Best practice when using “free UC” apps</h3>
                <p>If you try any third-party app:</p>
                <ul>
                    <li>Only use apps from the Google Play Store or Apple App Store.</li>
                    <li>Read reviews carefully; check number of installs and recent ratings.</li>
                    <li>Never share your PUBG password, IGN recovery details, or payment info.</li>
                    <li>If an app asks for suspicious permissions (like access to SMS or device admin), avoid it.</li>
                </ul>

                <h3>4. Final word</h3>
                <p>If it sounds too good to be true — it probably is. Want UC? use safe events, earn Play credits with trusted apps, and follow creators for legitimate giveaways. Protect your account — your progress and security matter more than a quick free UC trick.</p>

                <h2>FAQ — Quick Q&A</h2>
                <div class="faq-section">
                    <div class="faq-item">
                        <strong>Q1: Can I really get free PUBG UC?</strong>
                        <p>A: Rarely for free instantly. Legit sources are events, creator giveaways, redeem codes, or using Play Store credits earned via trustworthy reward apps.</p>
                    </div>
                    <div class="faq-item">
                        <strong>Q2: Do PUBG UC hacks work?</strong>
                        <p>A: No — most are scams. They risk your account, personal data, and device security.</p>
                    </div>
                    <div class="faq-item">
                        <strong>Q3: Which apps legitimately help earn credits for UC?</strong>
                        <p>A: Google Opinion Rewards and well-known reward/survey apps can earn Play Store balance, which you can use to buy UC.</p>
                    </div>
                    <div class="faq-item">
                        <strong>Q4: Is it safe to use a “PUBG free UC app”?</strong>
                        <p>A: Only if it’s from Google Play or App Store and has many positive reviews. Still, do not share account passwords.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="adModal" class="modal-overlay"><div class="modal-content" id="modalContent"></div></div>
    <div id="success-toast"></div>

    <!-- Menu Modal -->
    <div id="menu-modal" class="modal-overlay">
        <div class="menu-content">
            <a id="home-link">Home</a>
            <a id="blog-link">Blog</a>
            <a class="coming-soon">About Us</a>
            <a class="coming-soon">How to Use</a>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const DIRECT_LINK_URL = 'https://bracecherry.com/u6a337e7?key=3325650cf041e83fe4b4f2c8585e55e2'; 
    const countrySelect = document.getElementById('countrySelect');
    const playerUidInput = document.getElementById('playerUid');
    const ucGrid = document.getElementById('ucOptionsGrid');
    const topupButton = document.getElementById('topupButton');
    const historyCard = document.getElementById('historyCard');
    const historyList = document.getElementById('historyList');
    const adModal = document.getElementById('adModal');
    const modalContent = document.getElementById('modalContent');
    const infoCardHeader = document.getElementById('infoCardHeader');
    const infoCardBody = document.getElementById('infoCardBody');
    const infoIcon = document.getElementById('infoIcon');
    const menuTrigger = document.getElementById('menu-trigger');
    const menuModal = document.getElementById('menu-modal');

    // New content elements for page switching
    const mainContent = document.getElementById('main-content');
    const blogSection = document.getElementById('blog-section');
    const homeLink = document.getElementById('home-link');
    const blogLink = document.getElementById('blog-link');

    let selectedUcIndex = null;
    let activeTimerInterval = null;

    const gameData = {
        'Bangladesh': { emoji: '🇧🇩', ucPackages: [ { text: '60 UC', value: 60, ads: 1 }, { text: '325 UC', value: 325, ads: 1 }, { text: '660 UC', value: 660, ads: 1 }, { text: '1800 UC', value: 1800, ads: 2 }, { text: '3850 UC', value: 3850, ads: 2 }, { text: '8100 UC', value: 8100, ads: 2 }, { text: 'Royale Pass', value: 'Royale Pass', ads: 1 }, { text: 'Elite Pass', value: 'Elite Pass', ads: 2}], validation: /^\d{7,10}$/ },
        'India': { emoji: '🇮🇳', ucPackages: [ { text: '60 UC', value: 60, ads: 1 }, { text: '325 UC', value: 325, ads: 1 }, { text: '660 UC', value: 660, ads: 1 }, { text: '1800 UC', value: 1800, ads: 2 }, { text: '3850 UC', value: 3850, ads: 2 }, { text: '8100 UC', value: 8100, ads: 2 }, { text: 'Royale Pass', value: 'Royale Pass', ads: 1 }, { text: 'Elite Pass', value: 'Elite Pass', ads: 2 }], validation: /^\d{7,10}$/ },
        'Pakistan': { emoji: '🇵🇰', ucPackages: [ { text: '60 UC', value: 60, ads: 1 }, { text: '325 UC', value: 325, ads: 1 }, { text: '660 UC', value: 660, ads: 1 }, { text: '1800 UC', value: 1800, ads: 2 }, { text: '3850 UC', value: 3850, ads: 2 }, { text: '8100 UC', value: 8100, ads: 2 }, { text: 'Royale Pass', value: 'Royale Pass', ads: 1 }, { text: 'Elite Pass', value: 'Elite Pass', ads: 2 }], validation: /^\d{7,10}$/ },
        'Nepal': { emoji: '🇳🇵', ucPackages: [ { text: '60 UC', value: 60, ads: 1 }, { text: '325 UC', value: 325, ads: 1 }, { text: '660 UC', value: 660, ads: 1 }, { text: '1800 UC', value: 1800, ads: 2 }, { text: '3850 UC', value: 3850, ads: 2 }, { text: '8100 UC', value: 8100, ads: 2 }, { text: 'Royale Pass', value: 'Royale Pass', ads: 1 }, { text: 'Elite Pass', value: 'Elite Pass', ads: 2 }], validation: /^\d{7,10}$/ },
        'Indonesia': { emoji: '🇮🇩', ucPackages: [ { text: '60 UC', value: 60, ads: 1 }, { text: '325 UC', value: 325, ads: 1 }, { text: '660 UC', value: 660, ads: 1 }, { text: '1800 UC', value: 1800, ads: 2 }, { text: '3850 UC', value: 3850, ads: 2 }, { text: '8100 UC', value: 8100, ads: 2 }, { text: 'Royale Pass', value: 'Royale Pass', ads: 1 }, { text: 'Elite Pass', value: 'Elite Pass', ads: 2 }], validation: /^\d{7,10}$/ },
        'Malaysia': { emoji: '🇲🇾', ucPackages: [ { text: '60 UC', value: 60, ads: 1 }, { text: '325 UC', value: 325, ads: 1 }, { text: '660 UC', value: 660, ads: 1 }, { text: '1800 UC', value: 1800, ads: 2 }, { text: '3850 UC', value: 3850, ads: 2 }, { text: '8100 UC', value: 8100, ads: 2 }, { text: 'Royale Pass', value: 'Royale Pass', ads: 1 }, { text: 'Elite Pass', value: 'Elite Pass', ads: 2 }], validation: /^\d{7,10}$/ }
    };
    
    function populateCountries() {
        for (const country in gameData) {
            const option = document.createElement('option');
            option.value = country;
            option.textContent = `${gameData[country].emoji} ${country}`;
            countrySelect.appendChild(option);
        }
    }

    function populateUcPackages(packages) {
        ucGrid.innerHTML = '';
        selectedUcIndex = null;
        if (!packages) {
             ucGrid.innerHTML = '<p style="grid-column: span 2; text-align: center; color: var(--text-light);">Please select a country first.</p>';
             return;
        }
        packages.forEach((pkg, index) => {
            const button = document.createElement('button');
            button.type = 'button'; button.className = 'uc-option';
            button.textContent = pkg.text; button.dataset.index = index;
            button.addEventListener('click', () => {
                const currentSelected = ucGrid.querySelector('.selected');
                if (currentSelected) currentSelected.classList.remove('selected');
                button.classList.add('selected');
                selectedUcIndex = index;
                validateForm();
            });
            ucGrid.appendChild(button);
        });
    }

    function showVerificationModal() {
        const selectedCountry = countrySelect.value;
        const ucData = gameData[selectedCountry].ucPackages[selectedUcIndex];
        let adsWatched = 0;
        
        modalContent.innerHTML = `<h3>Verification Required</h3><p style="margin: 1rem 0; color: var(--text-light);">To continue, please complete ${ucData.ads} steps. You must wait 10 seconds on the opened page.</p><div id="adButtonsContainer" style="display: flex; flex-direction: column; gap: 1rem; width: 100%;"></div><button class="btn-cancel" id="cancelAdProcess">Cancel Process</button>`;
        
        const adButtonsContainer = modalContent.querySelector('#adButtonsContainer');
        
        for (let i = 0; i < ucData.ads; i++) {
            const adButton = document.createElement('button');
            adButton.className = 'btn-ad';
            adButton.innerHTML = `<i class="fas fa-play-circle"></i> Start Step (${i + 1}/${ucData.ads})`;
            adButton.disabled = (i > 0);
            
            adButton.addEventListener('click', () => {
                createVerificationAdFlow(adButton, () => {
                    adButton.innerHTML = `<i class="fas fa-check-circle"></i> Step Complete!`;
                    adButton.classList.add('watched'); adButton.disabled = true;
                    adsWatched++;
                    if (adsWatched >= ucData.ads) {
                        adModal.classList.remove('show');
                        startTopupProcess();
                    } else {
                        const nextButton = adButtonsContainer.querySelectorAll('.btn-ad')[adsWatched];
                        if (nextButton) nextButton.disabled = false;
                    }
                });
            });
            adButtonsContainer.appendChild(adButton);
        }
        
        modalContent.querySelector('#cancelAdProcess').addEventListener('click', () => { adModal.classList.remove('show'); clearVerificationState(); });
        adModal.classList.add('show');
    }
    
    function createVerificationAdFlow(button, onComplete) {
        if (localStorage.getItem('activeTimer')) return;
        const adWindow = window.open(DIRECT_LINK_URL, '_blank');
        const endTime = Date.now() + 10000;
        localStorage.setItem('activeTimer', JSON.stringify({ endTime }));
        
        const checkWindowClosed = setInterval(() => {
            if (!adWindow || adWindow.closed) {
                clearInterval(checkWindowClosed);
                if (Date.now() < endTime) {
                    showToast('Cancelled! You closed the page too early.', 'danger');
                    adModal.classList.remove('show');
                    clearVerificationState();
                }
            }
        }, 500);
        runTimerLoop(button, endTime, onComplete);
    }

    function runTimerLoop(button, endTime, onComplete) {
        if (activeTimerInterval) clearInterval(activeTimerInterval);
        button.disabled = true;
        activeTimerInterval = setInterval(() => {
            const remainingTime = Math.max(0, endTime - Date.now());
            if (remainingTime > 0) {
                button.innerHTML = `<i class="fas fa-hourglass-half"></i> Please Wait ${Math.ceil(remainingTime / 1000)}s...`;
            } else {
                clearInterval(activeTimerInterval); activeTimerInterval = null;
                localStorage.removeItem('activeTimer');
                onComplete();
            }
        }, 250);
    }
    
    function handleSpeedUp(index) {
        const history = JSON.parse(localStorage.getItem('topupHistory')) || [];
        const entry = history[index];
        if (!entry || entry.adsWatched >= 3) return;

        modalContent.innerHTML = `<h3>Speed Up Top-up</h3><p style="margin: 1rem 0; color: var(--text-light);">Complete a quick step to cut the remaining waiting time in half.</p><button class="btn-ad" id="speedUpAdButton"><i class="fas fa-forward"></i> Start Speed-up Step</button><button class="btn-cancel" id="cancelSpeedUp">Cancel</button>`;
        
        modalContent.querySelector('#speedUpAdButton').addEventListener('click', (e) => {
            createVerificationAdFlow(e.currentTarget, () => {
                const currentHistory = JSON.parse(localStorage.getItem('topupHistory')) || [];
                const currentEntry = currentHistory[index];
                if(currentEntry && currentEntry.status === 'pending') {
                    currentEntry.endTime -= (currentEntry.endTime - Date.now()) / 2;
                    currentEntry.adsWatched += 1;
                    localStorage.setItem('topupHistory', JSON.stringify(currentHistory));
                    showToast('Remaining time has been halved!');
                    adModal.classList.remove('show');
                    renderHistory();
                }
            });
        });
        
        modalContent.querySelector('#cancelSpeedUp').addEventListener('click', () => { adModal.classList.remove('show'); clearVerificationState(); });
        adModal.classList.add('show');
    }

    // MODIFIED loading function
    function startTopupProcess() {
        const btnText = document.getElementById('btnText');
        const loadingSpinner = document.getElementById('loadingSpinner');

        topupButton.disabled = true;
        btnText.textContent = 'Processing...';
        loadingSpinner.classList.remove('d-none');

        setTimeout(() => {
            btnText.textContent = 'Top-up Now';
            loadingSpinner.classList.add('d-none');

            showToast(`Top-up is pending. Please check history.`);
            saveHistory();

            document.getElementById('topupForm').reset();
            countrySelect.value = '';
            populateUcPackages(null);
            clearVerificationState();
            validateForm();

        }, 3000); // 3-second fake loading time
    }
    
    function saveHistory() {
        const ucData = gameData[countrySelect.value]?.ucPackages[selectedUcIndex];
        const newEntry = {
            uid: playerUidInput.value, package: ucData.text, date: new Date().toISOString(), status: 'pending', 
            endTime: Date.now() + 3 * 60 * 60 * 1000, adsWatched: 0
        };
        let history = JSON.parse(localStorage.getItem('topupHistory')) || [];
        history.unshift(newEntry);
        localStorage.setItem('topupHistory', JSON.stringify(history.slice(0, 5)));
        renderHistory();
    }

    function renderHistory() {
        const history = JSON.parse(localStorage.getItem('topupHistory')) || [];
        historyCard.style.display = history.length > 0 ? 'block' : 'none';
        historyList.innerHTML = '';
        history.forEach((entry, index) => {
             const listItem = document.createElement('div');
             listItem.className = 'list-item';
             let statusSection = (entry.status === 'success') ? `<span class="status-badge success">Success</span>` : `<div style="text-align: right;"><span class="status-badge pending">Pending</span><div class="timer-display" data-index="${index}" style="font-size:1rem; margin-top: 4px;">${formatTime(entry.endTime - Date.now())}</div><button class="btn-speed-up" data-index="${index}" ${entry.adsWatched >= 3 ? 'disabled' : ''}>Speed Up (${entry.adsWatched}/3)</button></div>`;
             listItem.innerHTML = `<div><strong style="display:block;">ID: ${entry.uid}</strong><span style="color:var(--text-light); font-size: 1rem;">${entry.package}</span></div>${statusSection}`;
             historyList.appendChild(listItem);
        });
        historyList.querySelectorAll('.btn-speed-up').forEach(button => button.addEventListener('click', (e) => handleSpeedUp(parseInt(e.currentTarget.dataset.index))));
    }

    function generateLiveTopup() {
        const liveTopupList = document.getElementById('liveTopupList'); 
        const uidStart = Math.floor(5100 + Math.random() * 900);
        const uidEnd = Math.floor(100 + Math.random() * 900);
        const amounts = ['Royale Pass', '660 UC', '325 UC', 'Elite Pass', '60 UC'];
        const listItem = document.createElement('div'); 
        listItem.className = 'list-item'; 
        listItem.innerHTML = `<span>ID: ${uidStart}****${uidEnd}</span><div style="display: flex; align-items: center; gap: 0.6rem;"><strong style="font-weight: 500;">${amounts[Math.floor(Math.random()*amounts.length)]}</strong><span class="status-badge success">Success</span></div>`;
        liveTopupList.prepend(listItem); 
        if (liveTopupList.children.length > 3) liveTopupList.lastChild.remove(); 
    }
    
    function validateForm() {
        const selectedCountry = countrySelect.value;
        const uid = playerUidInput.value;
        topupButton.disabled = !(selectedCountry && gameData[selectedCountry].validation.test(uid) && selectedUcIndex !== null);
    }
    
    function showToast(message, type = 'normal') {
        const toast = document.getElementById('success-toast');
        toast.textContent = message;
        toast.style.borderColor = type === 'danger' ? 'var(--danger-color)' : 'var(--primary-color)';
        toast.classList.add('show');
        setTimeout(() => toast.classList.remove('show'), 4000);
    }

    function formatTime(ms) {
        if (ms < 0) return '00:00:00';
        const h = String(Math.floor(ms / 3600000)).padStart(2, '0');
        const m = String(Math.floor((ms % 3600000) / 60000)).padStart(2, '0');
        const s = String(Math.floor((ms % 60000) / 1000)).padStart(2, '0');
        return `${h}:${m}:${s}`;
    }

    function updateAllTimers() {
        let needsRender = false;
        const history = JSON.parse(localStorage.getItem('topupHistory')) || [];
        history.forEach(entry => { if (entry.status === 'pending' && entry.endTime - Date.now() < 1000) { entry.status = 'success'; needsRender = true; } });
        if (needsRender) {
            localStorage.setItem('topupHistory', JSON.stringify(history));
            renderHistory();
        } else {
             document.querySelectorAll('.timer-display').forEach(el => {
                const entry = history[el.dataset.index];
                if (entry) el.textContent = formatTime(entry.endTime - Date.now());
             });
        }
    }
    
    function clearVerificationState() {
        localStorage.removeItem('activeTimer');
        if(activeTimerInterval) clearInterval(activeTimerInterval);
        activeTimerInterval = null;
    }
    
    infoCardHeader.addEventListener('click', () => {
        const isHidden = infoCardBody.style.display === 'none' || infoCardBody.style.display === '';
        infoCardBody.style.display = isHidden ? 'block' : 'none';
        infoIcon.style.transform = isHidden ? 'rotate(180deg)' : 'rotate(0deg)';
    });

    countrySelect.addEventListener('change', () => {
        populateUcPackages(gameData[countrySelect.value]?.ucPackages);
        validateForm();
    });
    playerUidInput.addEventListener('input', validateForm);
    topupButton.addEventListener('click', showVerificationModal);
    menuTrigger.addEventListener('click', () => menuModal.classList.add('show'));
    menuModal.addEventListener('click', (event) => { if (event.target === menuModal) menuModal.classList.remove('show'); });
    
    // Page switching logic
    homeLink.addEventListener('click', () => {
        blogSection.style.display = 'none';
        mainContent.style.display = 'block';
        menuModal.classList.remove('show');
    });

    blogLink.addEventListener('click', () => {
        mainContent.style.display = 'none';
        blogSection.style.display = 'block';
        menuModal.classList.remove('show');
    });

    document.querySelectorAll('.coming-soon').forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            menuModal.classList.remove('show');
            showToast('This page is coming soon!');
        });
    });

    populateCountries();
    renderHistory();
    setInterval(generateLiveTopup, 4500);
    setInterval(updateAllTimers, 1000);
});
</script>

<!-- Social Bar Ad Script - ADDED -->
<script async type='text/javascript' src='//pl27680051.revenuecpmgate.com/c8/73/a6/c873a6475228e4f8f343ea6cfb0c110a.js'></script>

</body>
</html>
